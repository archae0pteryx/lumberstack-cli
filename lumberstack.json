{
  "app_name": "myapp",
  "builder": [
    {
      "tag": "redwood",
      "feedback": "Creating Redwood App",
      "commands": [
        {
          "command": "yarn create redwood-app {{app_name}} --typescript --overwrite",
          "context": "."
        },
        {
          "command": "yarn rw generate page home /"
        }
      ]
    },
    {
      "tag": "templates",
      "feedback": "Copying redwood templates",
      "templates": [
        {
          "source": "templates/redwood/.gitignore.template",
          "dest": "{{app_name}}/.gitignore"
        },
        {
          "source": "templates/redwood/.prettierignore.template",
          "dest": "{{app_name}}/.prettierignore"
        }
      ]
    },
    {
      "tag": "prisma",
      "feedback": "Setting up prisma",
      "templates": [
        {
          "source": "templates/redwood/.env.template",
          "dest": "{{app_name}}/.env",
          "replace_map": {
            "database_url": "postgresql://postgres:development@localhost:5432/{{app_name}}_dev",
            "test_database_url": "postgresql://postgres:test@localhost:5432/{{app_name}}_test"
          }
        },
        {
          "source": "templates/redwood/docker-compose.template",
          "dest": "{{app_name}}/docker-compose.yml",
          "replace_map": {
            "app_name": "{{app_name}}"
          }
        },
        {
          "source": "templates/prisma/schema.prisma.template",
          "dest": "{{app_name}}/api/db/schema.prisma"
        },
        {
          "source": "templates/prisma/seed.ts.template",
          "dest": "{{app_name}}/api/db/seed.ts"
        }
      ],
      "commands": [
        {
          "feedback": "Starting db",
          "command": "docker compose -f docker-compose.yml stop db"
        },
        {
          "command": "docker compose -f docker-compose.yml up db -d"
        },
        {
          "feedback": "Migrating prisma",
          "command": "yarn rw prisma migrate dev --name init"
        }
      ]
    },
    {
      "tag": "auth",
      "feedback": "Setting up redwood auth",
      "commands": [
        {
          "command": "yarn rw setup auth dbAuth --force"
        },
        {
          "command": "yarn rw generate dbAuth --force"
        }
      ]
    },
    {
      "tag": "tailwind",
      "feedback": "Setting up tailwind",
      "commands": [
        {
          "command": "yarn rw setup ui tailwind",
          "context": "web"
        }
      ]
    }
  ]
}
